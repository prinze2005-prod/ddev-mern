{"ast":null,"code":"import { LOAD_PRODUCTS, SET_LISTVIEW, SET_GRIDVIEW, UPDATE_SORT, SORT_PRODUCTS, UPDATE_FILTERS, FILTER_PRODUCTS, CLEAR_FILTERS } from '../actions';\n\nconst filter_reducer = (state, action) => {\n  if (action.type === LOAD_PRODUCTS) {\n    let maxPrice = action.payload.map(p => p.price);\n    maxPrice = Math.max(...maxPrice);\n    return { ...state,\n      all_products: [...action.payload],\n      filtered_products: [...action.payload],\n      filters: { ...state.filters,\n        max_price: maxPrice,\n        price: maxPrice\n      }\n    };\n  }\n\n  if (action.type === SET_GRIDVIEW) {\n    return { ...state,\n      grid_view: true\n    };\n  }\n\n  if (action.type === SET_LISTVIEW) {\n    return { ...state,\n      grid_view: false\n    };\n  }\n\n  if (action.type === UPDATE_SORT) {\n    return { ...state,\n      sort: action.payload\n    };\n  }\n\n  if (action.type === SORT_PRODUCTS) {\n    const {\n      sort,\n      filtered_products\n    } = state;\n    let tempProducts = [...filtered_products];\n\n    if (sort === 'price-lowest') {\n      tempProducts = tempProducts.sort((a, b) => {\n        if (a.price < b.price) {\n          return -1;\n        }\n\n        if (a.price > b.price) {\n          return 1;\n        }\n\n        return 0;\n      });\n    }\n\n    if (sort === 'price-highest') {\n      tempProducts = tempProducts.sort((a, b) => b.price - a.price);\n    }\n\n    if (sort === 'name-a') {\n      tempProducts = tempProducts.sort((a, b) => {\n        return a.name.localeCompare(b.name);\n      });\n    }\n\n    if (sort === 'name-z') {\n      tempProducts = tempProducts.sort((a, b) => {\n        return b.name.localeCompare(a.name);\n      });\n    }\n\n    return { ...state,\n      filtered_products: tempProducts\n    };\n  }\n\n  if (action.type === UPDATE_FILTERS) {\n    const {\n      name,\n      value\n    } = action.payload;\n    return { ...state,\n      filters: { ...state.filters,\n        [name]: value\n      }\n    };\n  }\n\n  if (action.type === FILTER_PRODUCTS) {\n    const {\n      all_products\n    } = state;\n    const {\n      text,\n      category,\n      company,\n      color,\n      price,\n      shipping\n    } = state.filters;\n    let tempProducts = [...all_products]; // filtering\n    // text\n\n    if (text) {\n      tempProducts = tempProducts.filter(product => {\n        return product.name.toLowerCase().startsWith(text);\n      });\n    } // category\n\n\n    if (category !== 'all') {\n      tempProducts = tempProducts.filter(product => product.category === category);\n    } // company\n\n\n    if (company !== 'all') {\n      tempProducts = tempProducts.filter(product => product.company === company);\n    } // colors\n\n\n    if (color !== 'all') {\n      tempProducts = tempProducts.filter(product => {\n        return product.colors.find(c => c === color);\n      });\n    } // price\n\n\n    tempProducts = tempProducts.filter(product => product.price <= price); // shipping\n\n    if (shipping) {\n      tempProducts = tempProducts.filter(product => product.shipping === true);\n    }\n\n    return { ...state,\n      filtered_products: tempProducts\n    };\n  }\n\n  if (action.type === CLEAR_FILTERS) {\n    return { ...state,\n      filters: { ...state.filters,\n        text: '',\n        company: 'all',\n        category: 'all',\n        color: 'all',\n        price: state.filters.max_price,\n        shipping: false\n      }\n    };\n  }\n\n  throw new Error(`No Matching \"${action.type}\" - action type`);\n};\n\nexport default filter_reducer;","map":{"version":3,"sources":["C:/Users/Saksham/Documents/GitHub/ddev-mern/Home-Pro/src/reducers/filter_reducer.js"],"names":["LOAD_PRODUCTS","SET_LISTVIEW","SET_GRIDVIEW","UPDATE_SORT","SORT_PRODUCTS","UPDATE_FILTERS","FILTER_PRODUCTS","CLEAR_FILTERS","filter_reducer","state","action","type","maxPrice","payload","map","p","price","Math","max","all_products","filtered_products","filters","max_price","grid_view","sort","tempProducts","a","b","name","localeCompare","value","text","category","company","color","shipping","filter","product","toLowerCase","startsWith","colors","find","c","Error"],"mappings":"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","sourcesContent":["import {\r\n  LOAD_PRODUCTS,\r\n  SET_LISTVIEW,\r\n  SET_GRIDVIEW,\r\n  UPDATE_SORT,\r\n  SORT_PRODUCTS,\r\n  UPDATE_FILTERS,\r\n  FILTER_PRODUCTS,\r\n  CLEAR_FILTERS,\r\n} from '../actions'\r\n\r\nconst filter_reducer = (state, action) => {\r\n  if (action.type === LOAD_PRODUCTS) {\r\n    let maxPrice = action.payload.map((p) => p.price)\r\n    maxPrice = Math.max(...maxPrice)\r\n\r\n    return {\r\n      ...state,\r\n      all_products: [...action.payload],\r\n      filtered_products: [...action.payload],\r\n      filters: { ...state.filters, max_price: maxPrice, price: maxPrice },\r\n    }\r\n  }\r\n  if (action.type === SET_GRIDVIEW) {\r\n    return { ...state, grid_view: true }\r\n  }\r\n  if (action.type === SET_LISTVIEW) {\r\n    return { ...state, grid_view: false }\r\n  }\r\n  if (action.type === UPDATE_SORT) {\r\n    return { ...state, sort: action.payload }\r\n  }\r\n  if (action.type === SORT_PRODUCTS) {\r\n    const { sort, filtered_products } = state\r\n    let tempProducts = [...filtered_products]\r\n    if (sort === 'price-lowest') {\r\n      tempProducts = tempProducts.sort((a, b) => {\r\n        if (a.price < b.price) {\r\n          return -1\r\n        }\r\n        if (a.price > b.price) {\r\n          return 1\r\n        }\r\n        return 0\r\n      })\r\n    }\r\n    if (sort === 'price-highest') {\r\n      tempProducts = tempProducts.sort((a, b) => b.price - a.price)\r\n    }\r\n    if (sort === 'name-a') {\r\n      tempProducts = tempProducts.sort((a, b) => {\r\n        return a.name.localeCompare(b.name)\r\n      })\r\n    }\r\n    if (sort === 'name-z') {\r\n      tempProducts = tempProducts.sort((a, b) => {\r\n        return b.name.localeCompare(a.name)\r\n      })\r\n    }\r\n    return { ...state, filtered_products: tempProducts }\r\n  }\r\n  if (action.type === UPDATE_FILTERS) {\r\n    const { name, value } = action.payload\r\n    return { ...state, filters: { ...state.filters, [name]: value } }\r\n  }\r\n  if (action.type === FILTER_PRODUCTS) {\r\n    const { all_products } = state\r\n    const { text, category, company, color, price, shipping } = state.filters\r\n\r\n    let tempProducts = [...all_products]\r\n    // filtering\r\n    // text\r\n    if (text) {\r\n      tempProducts = tempProducts.filter((product) => {\r\n        return product.name.toLowerCase().startsWith(text)\r\n      })\r\n    }\r\n    // category\r\n    if (category !== 'all') {\r\n      tempProducts = tempProducts.filter(\r\n        (product) => product.category === category\r\n      )\r\n    }\r\n\r\n    // company\r\n    if (company !== 'all') {\r\n      tempProducts = tempProducts.filter(\r\n        (product) => product.company === company\r\n      )\r\n    }\r\n    // colors\r\n    if (color !== 'all') {\r\n      tempProducts = tempProducts.filter((product) => {\r\n        return product.colors.find((c) => c === color)\r\n      })\r\n    }\r\n    // price\r\n    tempProducts = tempProducts.filter((product) => product.price <= price)\r\n    // shipping\r\n    if (shipping) {\r\n      tempProducts = tempProducts.filter((product) => product.shipping === true)\r\n    }\r\n\r\n    return { ...state, filtered_products: tempProducts }\r\n  }\r\n  if (action.type === CLEAR_FILTERS) {\r\n    return {\r\n      ...state,\r\n      filters: {\r\n        ...state.filters,\r\n        text: '',\r\n        company: 'all',\r\n        category: 'all',\r\n        color: 'all',\r\n        price: state.filters.max_price,\r\n        shipping: false,\r\n      },\r\n    }\r\n  }\r\n  throw new Error(`No Matching \"${action.type}\" - action type`)\r\n}\r\n\r\nexport default filter_reducer\r\n"]},"metadata":{},"sourceType":"module"}